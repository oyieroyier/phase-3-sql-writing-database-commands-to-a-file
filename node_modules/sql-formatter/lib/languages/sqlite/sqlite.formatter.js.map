{"version":3,"file":"sqlite.formatter.js","names":["reservedSelect","expandPhrases","reservedCommands","reservedSetOperations","reservedJoins","reservedPhrases","SqliteFormatter","Tokenizer","reservedDependentClauses","reservedKeywords","keywords","reservedFunctionNames","functions","stringTypes","quote","prefixes","requirePrefix","identTypes","paramTypes","positional","numbered","named","operators","Formatter"],"sources":["../../../src/languages/sqlite/sqlite.formatter.ts"],"sourcesContent":["import { expandPhrases } from 'src/expandPhrases';\nimport Formatter from 'src/formatter/Formatter';\nimport Tokenizer from 'src/lexer/Tokenizer';\nimport { functions } from './sqlite.functions';\nimport { keywords } from './sqlite.keywords';\n\nconst reservedSelect = expandPhrases(['SELECT [ALL | DISTINCT]']);\n\nconst reservedCommands = expandPhrases([\n  // queries\n  'WITH [RECURSIVE]',\n  'FROM',\n  'WHERE',\n  'GROUP BY',\n  'HAVING',\n  'WINDOW',\n  'PARTITION BY',\n  'ORDER BY',\n  'LIMIT',\n  'OFFSET',\n  // Data manipulation\n  // - insert:\n  'INSERT [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK] INTO',\n  'REPLACE INTO',\n  'VALUES',\n  // - update:\n  'UPDATE [OR ABORT | OR FAIL | OR IGNORE | OR REPLACE | OR ROLLBACK]',\n  'SET',\n  // - delete:\n  'DELETE FROM',\n  // Data definition\n  'CREATE [TEMPORARY | TEMP] VIEW [IF NOT EXISTS]',\n  'CREATE [TEMPORARY | TEMP] TABLE [IF NOT EXISTS]',\n  'DROP TABLE [IF EXISTS]',\n  // - alter table:\n  'ALTER TABLE',\n  'ADD [COLUMN]',\n  'DROP [COLUMN]',\n  'RENAME [COLUMN]',\n  'RENAME TO',\n\n  // other\n  'SET SCHEMA',\n]);\n\nconst reservedSetOperations = expandPhrases(['UNION [ALL]', 'EXCEPT', 'INTERSECT']);\n\n// joins - https://www.sqlite.org/syntax/join-operator.html\nconst reservedJoins = expandPhrases([\n  'JOIN',\n  '{LEFT | RIGHT | FULL} [OUTER] JOIN',\n  '{INNER | CROSS} JOIN',\n  'NATURAL [INNER] JOIN',\n  'NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN',\n]);\n\nconst reservedPhrases = expandPhrases([\n  'ON DELETE',\n  'ON UPDATE',\n  '{ROWS | RANGE | GROUPS} BETWEEN',\n]);\n\nexport default class SqliteFormatter extends Formatter {\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedSelect,\n      reservedSetOperations,\n      reservedJoins,\n      reservedDependentClauses: ['WHEN', 'ELSE'],\n      reservedPhrases,\n      reservedKeywords: keywords,\n      reservedFunctionNames: functions,\n      stringTypes: [\n        \"''-qq\",\n        { quote: \"''-raw\", prefixes: ['X'], requirePrefix: true },\n        // Depending on context SQLite also supports double-quotes for strings,\n        // and single-quotes for identifiers.\n      ],\n      identTypes: [`\"\"-qq`, '``', '[]'],\n      // https://www.sqlite.org/lang_expr.html#parameters\n      paramTypes: { positional: true, numbered: ['?'], named: [':', '@', '$'] },\n      operators: ['%', '~', '&', '|', '<<', '>>', '==', '->', '->>', '||'],\n    });\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,cAAc,GAAG,IAAAC,4BAAA,EAAc,CAAC,yBAAD,CAAd,CAAvB;AAEA,IAAMC,gBAAgB,GAAG,IAAAD,4BAAA,EAAc,CACrC;AACA,kBAFqC,EAGrC,MAHqC,EAIrC,OAJqC,EAKrC,UALqC,EAMrC,QANqC,EAOrC,QAPqC,EAQrC,cARqC,EASrC,UATqC,EAUrC,OAVqC,EAWrC,QAXqC,EAYrC;AACA;AACA,yEAdqC,EAerC,cAfqC,EAgBrC,QAhBqC,EAiBrC;AACA,oEAlBqC,EAmBrC,KAnBqC,EAoBrC;AACA,aArBqC,EAsBrC;AACA,gDAvBqC,EAwBrC,iDAxBqC,EAyBrC,wBAzBqC,EA0BrC;AACA,aA3BqC,EA4BrC,cA5BqC,EA6BrC,eA7BqC,EA8BrC,iBA9BqC,EA+BrC,WA/BqC,EAiCrC;AACA,YAlCqC,CAAd,CAAzB;AAqCA,IAAME,qBAAqB,GAAG,IAAAF,4BAAA,EAAc,CAAC,aAAD,EAAgB,QAAhB,EAA0B,WAA1B,CAAd,CAA9B,C,CAEA;;AACA,IAAMG,aAAa,GAAG,IAAAH,4BAAA,EAAc,CAClC,MADkC,EAElC,oCAFkC,EAGlC,sBAHkC,EAIlC,sBAJkC,EAKlC,4CALkC,CAAd,CAAtB;AAQA,IAAMI,eAAe,GAAG,IAAAJ,4BAAA,EAAc,CACpC,WADoC,EAEpC,WAFoC,EAGpC,iCAHoC,CAAd,CAAxB;;IAMqBK,e;;;;;;;;;;;;;WACnB,qBAAY;MACV,OAAO,IAAIC,qBAAJ,CAAc;QACnBL,gBAAgB,EAAhBA,gBADmB;QAEnBF,cAAc,EAAdA,cAFmB;QAGnBG,qBAAqB,EAArBA,qBAHmB;QAInBC,aAAa,EAAbA,aAJmB;QAKnBI,wBAAwB,EAAE,CAAC,MAAD,EAAS,MAAT,CALP;QAMnBH,eAAe,EAAfA,eANmB;QAOnBI,gBAAgB,EAAEC,iBAPC;QAQnBC,qBAAqB,EAAEC,iBARJ;QASnBC,WAAW,EAAE,CACX,OADW,EAEX;UAAEC,KAAK,EAAE,QAAT;UAAmBC,QAAQ,EAAE,CAAC,GAAD,CAA7B;UAAoCC,aAAa,EAAE;QAAnD,CAFW,CAGX;QACA;QAJW,CATM;QAenBC,UAAU,EAAE,YAAU,IAAV,EAAgB,IAAhB,CAfO;QAgBnB;QACAC,UAAU,EAAE;UAAEC,UAAU,EAAE,IAAd;UAAoBC,QAAQ,EAAE,CAAC,GAAD,CAA9B;UAAqCC,KAAK,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX;QAA5C,CAjBO;QAkBnBC,SAAS,EAAE,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,IAArB,EAA2B,IAA3B,EAAiC,IAAjC,EAAuC,IAAvC,EAA6C,KAA7C,EAAoD,IAApD;MAlBQ,CAAd,CAAP;IAoBD;;;;EAtB0CC,sB"}