{"version":3,"file":"sql.formatter.js","names":["reservedSelect","expandPhrases","reservedCommands","reservedSetOperations","reservedJoins","reservedPhrases","SqlFormatter","Tokenizer","reservedDependentClauses","reservedKeywords","keywords","reservedFunctionNames","functions","stringTypes","quote","prefixes","requirePrefix","identTypes","paramTypes","positional","operators","Formatter"],"sources":["../../../src/languages/sql/sql.formatter.ts"],"sourcesContent":["import { expandPhrases } from 'src/expandPhrases';\nimport Formatter from 'src/formatter/Formatter';\nimport Tokenizer from 'src/lexer/Tokenizer';\nimport { functions } from './sql.functions';\nimport { keywords } from './sql.keywords';\n\nconst reservedSelect = expandPhrases(['SELECT [ALL | DISTINCT]']);\n\nconst reservedCommands = expandPhrases([\n  // queries\n  'WITH [RECURSIVE]',\n  'FROM',\n  'WHERE',\n  'GROUP BY [ALL | DISTINCT]',\n  'HAVING',\n  'WINDOW',\n  'PARTITION BY',\n  'ORDER BY',\n  'LIMIT',\n  'OFFSET',\n  'FETCH {FIRST | NEXT}',\n  // Data manipulation\n  // - insert:\n  'INSERT INTO',\n  'VALUES',\n  // - update:\n  'UPDATE',\n  'SET',\n  'WHERE CURRENT OF',\n  // - delete:\n  'DELETE FROM',\n  // - truncate:\n  'TRUNCATE TABLE',\n  // Data definition\n  'CREATE [RECURSIVE] VIEW',\n  'CREATE [GLOBAL TEMPORARY | LOCAL TEMPORARY] TABLE',\n  'DROP TABLE',\n  // - alter table:\n  'ALTER TABLE',\n  'ADD COLUMN',\n  'DROP [COLUMN]',\n  'RENAME COLUMN',\n  'RENAME TO',\n  'ALTER [COLUMN]',\n  '{SET | DROP} DEFAULT', // for alter column\n  'ADD SCOPE', // for alter column\n  'DROP SCOPE {CASCADE | RESTRICT}', // for alter column\n  'RESTART WITH', // for alter column\n\n  // other\n  'SET SCHEMA',\n]);\n\nconst reservedSetOperations = expandPhrases([\n  'UNION [ALL | DISTINCT]',\n  'EXCEPT [ALL | DISTINCT]',\n  'INTERSECT [ALL | DISTINCT]',\n]);\n\nconst reservedJoins = expandPhrases([\n  'JOIN',\n  '{LEFT | RIGHT | FULL} [OUTER] JOIN',\n  '{INNER | CROSS} JOIN',\n  'NATURAL [INNER] JOIN',\n  'NATURAL {LEFT | RIGHT | FULL} [OUTER] JOIN',\n]);\n\nconst reservedPhrases = expandPhrases(['ON DELETE', 'ON UPDATE', '{ROWS | RANGE} BETWEEN']);\n\nexport default class SqlFormatter extends Formatter {\n  tokenizer() {\n    return new Tokenizer({\n      reservedCommands,\n      reservedSelect,\n      reservedSetOperations,\n      reservedJoins,\n      reservedDependentClauses: ['WHEN', 'ELSE'],\n      reservedPhrases,\n      reservedKeywords: keywords,\n      reservedFunctionNames: functions,\n      stringTypes: [\n        { quote: \"''-qq-bs\", prefixes: ['N', 'U&'] },\n        { quote: \"''-raw\", prefixes: ['X'], requirePrefix: true },\n      ],\n      identTypes: [`\"\"-qq`, '``'],\n      paramTypes: { positional: true },\n      operators: ['||'],\n    });\n  }\n}\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAEA,IAAMA,cAAc,GAAG,IAAAC,4BAAA,EAAc,CAAC,yBAAD,CAAd,CAAvB;AAEA,IAAMC,gBAAgB,GAAG,IAAAD,4BAAA,EAAc,CACrC;AACA,kBAFqC,EAGrC,MAHqC,EAIrC,OAJqC,EAKrC,2BALqC,EAMrC,QANqC,EAOrC,QAPqC,EAQrC,cARqC,EASrC,UATqC,EAUrC,OAVqC,EAWrC,QAXqC,EAYrC,sBAZqC,EAarC;AACA;AACA,aAfqC,EAgBrC,QAhBqC,EAiBrC;AACA,QAlBqC,EAmBrC,KAnBqC,EAoBrC,kBApBqC,EAqBrC;AACA,aAtBqC,EAuBrC;AACA,gBAxBqC,EAyBrC;AACA,yBA1BqC,EA2BrC,mDA3BqC,EA4BrC,YA5BqC,EA6BrC;AACA,aA9BqC,EA+BrC,YA/BqC,EAgCrC,eAhCqC,EAiCrC,eAjCqC,EAkCrC,WAlCqC,EAmCrC,gBAnCqC,EAoCrC,sBApCqC,EAoCb;AACxB,WArCqC,EAqCxB;AACb,iCAtCqC,EAsCF;AACnC,cAvCqC,EAuCrB;AAEhB;AACA,YA1CqC,CAAd,CAAzB;AA6CA,IAAME,qBAAqB,GAAG,IAAAF,4BAAA,EAAc,CAC1C,wBAD0C,EAE1C,yBAF0C,EAG1C,4BAH0C,CAAd,CAA9B;AAMA,IAAMG,aAAa,GAAG,IAAAH,4BAAA,EAAc,CAClC,MADkC,EAElC,oCAFkC,EAGlC,sBAHkC,EAIlC,sBAJkC,EAKlC,4CALkC,CAAd,CAAtB;AAQA,IAAMI,eAAe,GAAG,IAAAJ,4BAAA,EAAc,CAAC,WAAD,EAAc,WAAd,EAA2B,wBAA3B,CAAd,CAAxB;;IAEqBK,Y;;;;;;;;;;;;;WACnB,qBAAY;MACV,OAAO,IAAIC,qBAAJ,CAAc;QACnBL,gBAAgB,EAAhBA,gBADmB;QAEnBF,cAAc,EAAdA,cAFmB;QAGnBG,qBAAqB,EAArBA,qBAHmB;QAInBC,aAAa,EAAbA,aAJmB;QAKnBI,wBAAwB,EAAE,CAAC,MAAD,EAAS,MAAT,CALP;QAMnBH,eAAe,EAAfA,eANmB;QAOnBI,gBAAgB,EAAEC,cAPC;QAQnBC,qBAAqB,EAAEC,cARJ;QASnBC,WAAW,EAAE,CACX;UAAEC,KAAK,EAAE,UAAT;UAAqBC,QAAQ,EAAE,CAAC,GAAD,EAAM,IAAN;QAA/B,CADW,EAEX;UAAED,KAAK,EAAE,QAAT;UAAmBC,QAAQ,EAAE,CAAC,GAAD,CAA7B;UAAoCC,aAAa,EAAE;QAAnD,CAFW,CATM;QAanBC,UAAU,EAAE,YAAU,IAAV,CAbO;QAcnBC,UAAU,EAAE;UAAEC,UAAU,EAAE;QAAd,CAdO;QAenBC,SAAS,EAAE,CAAC,IAAD;MAfQ,CAAd,CAAP;IAiBD;;;;EAnBuCC,sB"}